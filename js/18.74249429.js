(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{c03b:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-page",[t.loadingSomethingBigger?i("q-linear-progress",{attrs:{indeterminate:"",color:"negative"}}):t._e(),i("div",{staticClass:"row"},[i("q-table",{staticClass:"col",attrs:{title:"Products or Brands",data:t.drugApins,filter:t.filter,columns:t.column,"row-key":"DrugApin","wrap-cells":"",separator:"cell",pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"top-right",fn:function(){return[i("q-input",{attrs:{outlined:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:t._u([{key:"append",fn:function(){return[i("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),i("q-btn",{attrs:{flat:""}},[i("q-icon",{attrs:{color:"primary",name:"refresh"},on:{click:function(e){return t.listAllDrugapins()}}}),i("q-tooltip",{attrs:{"content-class":"bg-primary",offset:[10,10]}},[t._v("\n          Refresh page\n        ")])],1),i("q-btn",{attrs:{outline:"",color:"primary"},on:{click:function(e){t.createProductDialog=!0}}},[i("q-tooltip",{attrs:{"content-class":"bg-indigo",offset:[10,10]}},[t._v("\n          Create new Drug\n        ")]),i("q-icon",{attrs:{color:"primary",name:"add",side:""}})],1)]},proxy:!0},{key:"body-cell-action",fn:function(e){return[i("q-td",{attrs:{props:e}},[i("q-btn",{staticClass:"q-mr-sm",attrs:{icon:"create",color:"primary",size:"sm",dense:""},on:{click:function(i){return t.opendialog(e.row.id,e.row.drug,e.row.apin,e.row.unit,e.row.strength)}}},[i("q-tooltip",{attrs:{"content-class":"bg-indigo",offset:[10,10]}},[t._v("\n          Edit Drug\n        ")])],1),t._v(" |\n        "),i("q-btn",{staticClass:"q-mx-sm",attrs:{icon:"delete",color:"negative",size:"sm",dense:""},on:{click:function(i){return t.openDeleteDialog(e.row.id,e.row.drug_name)}}},[i("q-tooltip",{attrs:{"content-class":"bg-red",offset:[10,10]}},[t._v("\n          Delete API\n        ")])],1)],1)]}}])})],1),i("q-dialog",{model:{value:t.createProductDialog,callback:function(e){t.createProductDialog=e},expression:"createProductDialog"}},[i("q-card",{staticClass:"q-ma-md"},[i("q-card-section",{staticClass:"bg-secondary text-white "},[i("div",{staticClass:"text-h6"},[t._v("Create New Brand or Product"),i("q-btn",{staticClass:"float-right",attrs:{icon:"close",flat:"",round:"",dense:""},on:{click:function(e){t.createProductDialog=!1}}})],1)]),i("q-card-section",[i("productForm",{attrs:{inside:"true",main:t.main}})],1)],1)],1),i("q-dialog",{model:{value:t.updateProduct,callback:function(e){t.updateProduct=e},expression:"updateProduct"}},[i("q-card",{staticClass:"q-ma-md"},[i("q-card-section",{staticClass:"bg-secondary text-white"},[i("div",{staticClass:"text-h6"},[t._v("Edit Product"),i("q-btn",{staticClass:"float-right",attrs:{icon:"close",flat:"",round:"",dense:""},on:{click:function(e){t.updateProduct=!1}}})],1)]),i("q-card-section",[i("q-form",{ref:"drugUpdateForm",on:{submit:t.editProduct}},[i("q-input",{staticClass:"q-mb-sm",attrs:{outlined:"",type:"text",label:"Id",disable:"",readonly:""},model:{value:t.productId,callback:function(e){t.productId=e},expression:"productId"}}),i("q-select",{staticClass:"q-mb-sm",attrs:{outlined:"",type:"text","use-input":"",options:t.drugs,"option-label":"drug_name","option-value":"id",label:"Drug Name","lazy-rules":""},model:{value:t.updateName,callback:function(e){t.updateName=e},expression:"updateName"}}),i("q-select",{staticClass:"q-mb-sm",attrs:{outlined:"","use-input":"",type:"text",options:t.units,"option-label":"Unit_name","option-value":"id",label:"Unit","lazy-rules":""},model:{value:t.updateUnit,callback:function(e){t.updateUnit=e},expression:"updateUnit"}}),i("q-select",{staticClass:"q-mb-sm",attrs:{outlined:"","use-input":"",type:"text",options:t.apins,"option-label":"Apin_name","option-value":"apin_id",label:"APIs","lazy-rules":""},model:{value:t.updateApin,callback:function(e){t.updateApin=e},expression:"updateApin"}}),i("q-input",{staticClass:"q-mb-sm",attrs:{outlined:"","use-input":"",type:"text",label:"Strength",rules:[function(t){return!!t||"Field is required"},function(t){return t.length>1||"Minimum of 2 characters only allowed"}]},model:{value:t.updateStrength,callback:function(e){t.updateStrength=e},expression:"updateStrength"}}),i("div",[i("q-btn",{attrs:{label:"Submit",type:"submit",color:"primary"}}),i("q-btn",{staticClass:"q-ml-sm",attrs:{label:"Reset",type:"reset",flat:""}})],1)],1)],1)],1)],1)],1)},n=[],s=(i("ddb0"),i("4081"));const l=i("c2a1").default,r=i("1712").to;var o={components:{productForm:s["a"]},data(){return{pagination:{rowsPerPage:10},updateName:"",updateApin:"",updateUnit:"",updateStrength:"",productId:"",drug:"",filter:"",main:this,createProductDialog:!1,deleteDialog:!1,updateProduct:!1,addApinToDrugDialog:!1,loadingSomethingBigger:!1,column:[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"drug",label:"Drug Name",field:t=>t.drug.drug_name,align:"left",sortable:!0},{name:"unit",label:"Units",field:t=>t.unit.unit_name,align:"left",sortable:!0},{name:"strength",label:"API and Strength",field:t=>t.apin.Apin_name+" "+t.strength,align:"left",sortable:!0},{name:"action",label:"Action",field:"id",align:"center"}],drugs:[],units:[],apins:[],drugApins:[]}},async created(){this.drugs=this.drugs.filter((t=>{let e=drugs.children;try{return e=e.filter((t=>{let e=t.drugs;return e.some((t=>this.drugs.includes(t)))})),e.length>0}catch(i){return!0}}))},mounted(){this.listAllDrugs(),this.listAllUnits(),this.listAllApins(),this.listAllDrugapins()},methods:{submit(){this.$refs.drugUpdateForm.submit()},async listAllUnits(){this.loadingSomethingBigger=!0;let[t,e]=await r(l.listAllUnits(this.filters));this.loadingSomethingBigger=!1,this.units=e||[]},async listAllDrugs(){this.loadingSomethingBigger=!0;let[t,e]=await r(l.listAllDrugs(this.filters));this.loadingSomethingBigger=!1,this.drugs=e||[]},async listAllApins(){this.loadingSomethingBigger=!0;let[t,e]=await r(l.listAllApins(this.filters));this.loadingSomethingBigger=!1,this.apins=e||[]},async listAllDrugapins(){this.loadingSomethingBigger=!0;let[t,e]=await r(l.listAllDrugApins(this.filters));this.loadingSomethingBigger=!1,this.drugApins=e||[]},async editProduct(){return new Promise((async(t,e)=>{let i={id:this.productId,drug_id:this.updateName.id,apin_id:this.updateApin.apin_id,unit_id:this.updateUnit.id,strength:this.updateStrength};console.log(i);let[a]=await r(l.updateDrugApin(i));if(console.log(a),a)return this.$q.notify({type:"negative",message:a.msg||a}),t(!1);this.$q.notify({type:"positive",message:"Changes saved successfully"}),await this.main.listAllDrugapins(),t(!0)}))},openDeleteDialog(t,e){this.deleteDialog=!0,this.productId=t,this.updateName=e},opendialog(t,e,i,a,n){this.updateProduct=!0,this.productId=t,this.updateName=e,this.updateApin=i,this.updateUnit=a,this.updateStrength=n,console.log("clicked on",drug_name)},addApinToDrug(t,e){this.addApinToDrugDialog=!0,this.productId=t,this.updateName1=e},dataDisplay(t){this.drug=t.drug.drug_name}}},d=o,u=i("2877"),c=i("9989"),p=i("6b1d"),g=i("eaac"),m=i("27f9"),h=i("0016"),f=i("9c40"),b=i("05c0"),q=i("db86"),y=i("24e8"),A=i("f09f"),D=i("a370"),v=i("0378"),w=i("ddd8"),_=i("eebe"),P=i.n(_),S=Object(u["a"])(d,a,n,!1,null,null,null);e["default"]=S.exports;P()(S,"components",{QPage:c["a"],QLinearProgress:p["a"],QTable:g["a"],QInput:m["a"],QIcon:h["a"],QBtn:f["a"],QTooltip:b["a"],QTd:q["a"],QDialog:y["a"],QCard:A["a"],QCardSection:D["a"],QForm:v["a"],QSelect:w["a"]})}}]);